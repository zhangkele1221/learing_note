**详细推导线性回归的最小二乘解**  
以下为斜率 $w_1$ 和截距 $w_0$ 的公式推导过程，严格使用最小二乘法（OLS）。

---

**1. 定义损失函数**  
设样本点为 $(x_i, y_i)$，共 $n$ 个样本，损失函数为残差平方和：  
$$
J(w_0, w_1) = \sum_{i=1}^n \left( y_i - (w_1 x_i + w_0) \right)^2
$$  
目标是最小化 $J(w_0, w_1)$。

---

**2. 对 $w_0$ 和 $w_1$ 求偏导并置零**  

**2.1 对截距 $w_0$ 求偏导**  
$$
\frac{\partial J}{\partial w_0} = -2 \sum_{i=1}^n \left( y_i - w_1 x_i - w_0 \right) = 0
$$  
整理得方程：  
$$
\sum_{i=1}^n y_i = w_1 \sum_{i=1}^n x_i + n w_0 \quad \text{(方程1)}
$$

**2.2 对斜率 $w_1$ 求偏导**  
$$
\frac{\partial J}{\partial w_1} = -2 \sum_{i=1}^n x_i \left( y_i - w_1 x_i - w_0 \right) = 0
$$  
整理得方程：  
$$
\sum_{i=1}^n x_i y_i = w_1 \sum_{i=1}^n x_i^2 + w_0 \sum_{i=1}^n x_i \quad \text{(方程2)}
$$

---

**3. 联立方程求解 $w_0$ 和 $w_1$**  

**3.1 从方程1解出 $w_0$**  
由方程1得：  
$$
w_0 = \frac{\sum_{i=1}^n y_i - w_1 \sum_{i=1}^n x_i}{n} = \bar{y} - w_1 \bar{x}
$$  
其中 $\bar{x} = \frac{1}{n}\sum x_i$，$\bar{y} = \frac{1}{n}\sum y_i$。

**3.2 将 $w_0$ 代入方程2解 $w_1$**  
将 $w_0 = \bar{y} - w_1 \bar{x}$ 代入方程2：  
$$
\sum x_i y_i = w_1 \sum x_i^2 + (\bar{y} - w_1 \bar{x}) \sum x_i
$$  
展开后整理得：  
$$
\sum x_i y_i - \bar{y} \sum x_i = w_1 \left( \sum x_i^2 - \bar{x} \sum x_i \right)
$$  
两边除以 $n$，化简为：  
$$
w_1 = \frac{n \sum x_i y_i - \sum x_i \sum y_i}{n \sum x_i^2 - (\sum x_i)^2}
$$

---

**4. 最终公式**  
**斜率 $w_1$**：  
$$
w_1 = \frac{n \sum xy - \sum x \sum y}{n \sum x^2 - (\sum x)^2}
$$  
**截距 $w_0$**：  
$$
w_0 = \frac{\sum y - w_1 \sum x}{n} = \bar{y} - w_1 \bar{x}
$$

---

**5. 公式等价性验证**  
**截距的两种表达式等价性**：  
将 $w_1$ 的公式代入 $w_0 = \bar{y} - w_1 \bar{x}$，展开后可得原始形式：  
$$
w_0 = \frac{\sum x^2 \sum y - \sum x \sum xy}{n \sum x^2 - (\sum x)^2}
$$  
（具体展开步骤略，可通过代数运算验证）。

---

**总结**  
- 斜率 $w_1$ 反映 $x$ 对 $y$ 的线性影响强度。  
- 截距 $w_0$ 表示 $x=0$ 时的预测值，计算时可通过均值简化。


-
看md原文表述如何正确格式化这个md中的数学符号正确的显示

所有的数学公式，必须用$$包裹，或者单行的用$表示，如果一行只有一个公式，就让公式在页中间展示，markdown格式的，一下所有对话都是，所有标题只能加粗，切记！！！要用$内容$，不要\(内容\)！！！